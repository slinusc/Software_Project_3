<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amenity Count</title>
    <!-- Füge Chart.js über CDN ein -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
</head>
<body>
    <!-- Erstelle ein Canvas-Element für das Diagramm -->
    <canvas id="myChart"></canvas>

    <script>
        // Funktion zum Laden der JSON-Daten
        function loadJSON(callback) {
            var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            xobj.open('GET', 'amenity_filtered.json', true); // Hier wird kein Pfad verwendet
            xobj.onreadystatechange = function () {
                if (xobj.readyState == 4 && xobj.status == "200") {
                    // Lade die JSON-Daten und rufe die Callback-Funktion auf
                    callback(JSON.parse(xobj.responseText));
                }
            };
            xobj.send(null);
        }

        // Diagramm erstellen, nachdem die JSON-Daten geladen wurden
        loadJSON(function(data) {
            // Vorverarbeitung der Daten: Zähle die Anzahl der verschiedenen Amenities
            var amenitiesCount = {};
            data.forEach(function(entry) {
                if (entry.node && entry.node.amenity) {
                    var amenity = entry.node.amenity;
                    amenitiesCount[amenity] = (amenitiesCount[amenity] || 0) + 1;
                }
            });

            // Diagramm erstellen
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(amenitiesCount),
                    datasets: [{
                        label: 'Number of Amenities',
                        data: Object.values(amenitiesCount),
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>

 <!-- Erstelle ein Canvas-Element für das Diagramm -->
    <canvas id="populationChart"></canvas>

    <script>
        // Funktion zum Laden der JSON-Daten
        function loadJSON(callback) {
            var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            xobj.open('GET', 'einwohnerzahlen.json', true); // Hier wird kein Pfad verwendet
            xobj.onreadystatechange = function () {
                if (xobj.readyState == 4 && xobj.status == "200") {
                    // Lade die JSON-Daten und rufe die Callback-Funktion auf
                    callback(JSON.parse(xobj.responseText));
                }
            };
            xobj.send(null);
        }

        // Diagramm erstellen, nachdem die JSON-Daten geladen wurden
        loadJSON(function(data) {
            // Extrahiere die Daten für das Diagramm
            var kantonsnamen = data.kantone.map(function(item) {
                return item.Kantonsname;
            });

            var einwohnerzahlen = data.kantone.map(function(item) {
                return item.Einwohnerzahl;
            });

            // Diagramm erstellen
            var ctx = document.getElementById('populationChart').getContext('2d');
            var populationChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: kantonsnamen,
                    datasets: [{
                        label: 'Einwohnerzahl pro Kanton',
                        data: einwohnerzahlen,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>

</body>
</html>
